# Mermaid and excalidraw.com

Those picture were generated by [excalidraw](excalidraw.com)

I entered this prompt:

_I like to visualize the logic behind an odata service.I have a main entity cops and a virtual entity v1,v2 and v3.
It is necessary to call the main entity xyz before the entities v1,v2 and v3 will return anything. The call to the main entity xyz buffers all the data on the server. I need this as a sequence diagram._

and got:

```mermaid
sequenceDiagram
    participant Client
    participant cops as Main Entity cops
    participant v1 as Virtual Entity v1
    participant v2 as Virtual Entity v2
    participant v3 as Virtual Entity v3

    Client->>cops: Request data from Main Entity
    Note right of cops: Data is buffered on Server
    cops-->>Client: Data Response

    Client->>v1: Request data from Virtual Entity v1
    v1-->>cops: Check for buffered data
    cops->>v1: Provide buffered data
    v1-->>Client: Data Response

    Client->>v2: Request data from Virtual Entity v2
    v2-->>cops: Check for buffered data
    cops->>v2: Provide buffered data
    v2-->>Client: Data Response

    Client->>v3: Request data from Virtual Entity v3
    v3-->>cops: Check for buffered data
    cops->>v3: Provide buffered data
    v3-->>Client: Data Response
```

_I have an odata service with a main entity "cops" and further entities that depend on "cops". It is necessary to call the main entity before the other entities will return anything. The call to cops buffers all the data on the server. I need this as a sequence diagram._

```mermaid
sequenceDiagram
    actor Client
    participant ODataService
    participant "cops"
    participant Buffer

    Client->>ODataService: Request "cops" data
    ODataService->>"cops": Fetch data
    "cops"-->>Buffer: Store data
    Buffer-->>ODataService: Data stored confirmation
    ODataService-->>Client: "cops" data response

    loop Fetch dependent entities
        Client->>ODataService: Request dependent entity data
        ODataService->>Buffer: Check "cops" data
        Buffer-->>ODataService: Data available
        ODataService->>Dependent: Fetch dependent data
        Dependent-->>ODataService: Dependent data response
        ODataService-->>Client: Dependent entity data response
    end
```

_An odata service has a main entity "cops" and further entities that depend on "cops". It is necessary to call the main entity before the other entities will return anything. The call to "cops" buffers all the data on the server. After the data is buffered the system calls an external odata service "oneLog" to read additional data. The other entities will return a combination of "cops" and "oneLog". I need this as a sequence diagramm._

```mermaid
sequenceDiagram
    participant Client
    participant CopsService as Cops OData Service
    participant OneLogService as OneLog OData Service
    participant OtherEntities as Other Entities

    Client->>CopsService: Request data from "cops" entity
    CopsService->>CopsService: Buffer all data
    Client->>OneLogService: Request additional data
    OneLogService-->>Client: Return additional data
    Client->>OtherEntities: Request combined data
    OtherEntities->>CopsService: Retrieve "cops" data
    OtherEntities->>OneLogService: Retrieve "oneLog" data
    OtherEntities-->>Client: Return combined data of "cops" and "oneLog"
```
